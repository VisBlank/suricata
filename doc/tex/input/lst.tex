\usepackage[tikz]{bclogo}
\usepackage{listings}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.78,0,0.42}
\definecolor{light-gray}{gray}{0.8}

\newcommand{\codefs}{\scriptsize}

% out put font
\newcommand{\outputf}{\itshape\codefs}
\newcommand{\inputf}{\slshape\codefs}
\newcommand{\cf}{\ttfamily\small}
% hight light text
\newcommand{\hl}[2]{\color{#1}{\ttfamily\scriptsize #2}}

\usepackage{caption}
\usepackage{listings}

\DeclareCaptionFont{white}{ \color{white} }
\DeclareCaptionFormat{listing}{
    \colorbox[cmyk]{0.43, 0.35, 0.35,0.01 }{
        \parbox{\textwidth}{\hspace{15pt}#1#2#3}
    }
}

\captionsetup[lstlisting]{format=listing, labelfont=white, textfont=white, singlelinecheck=false, margin=0pt, font={bf,scriptsize}}

\lstset{
	language=C, % the language of the code
	basicstyle=\ttfamily\scriptsize, % the size of the fonts that are used for the code
	%numbers=left, % where to put the line-numbers
	%numberstyle=\tiny\color{gray}, % the style that is used for the line-numbers
	%stepnumber=1, % the step between two line-numbers. If it's 1, each line will be numbered
	%numbersep=8pt, % how far the line-numbers are from the code
	%backgroundcolor=\color{light-gray}, % choose the background color. You must add \usepackage{color}
	backgroundcolor=\color{white}, % choose the background color. You must add \usepackage{color}
	showspaces=false, % show spaces adding particular underscores
	showstringspaces=false, % underline spaces within strings
	showtabs=false, % show tabs within strings adding particular underscores
	%
	% adds a frame around the code
	%
	%frameround=fttt,
	%frame=trBL,
	%framexleftmargin=2mm,
	%frame=trbl,
	%frameshape={RYRYNYYYY}{yny}{yny}{RYRYNYYYY},
	%rulesepcolor=\color{blue},
	rulecolor=\color{black}, % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
	tabsize=2, % sets default tabsize to 4 spaces
	%captionpos=b, % sets the caption-position to bottom
	breaklines=false, % sets automatic line breaking
	breakatwhitespace=true, % sets if automatic breaks should only happen at whitespace
    %title={\it \lstname}, % show the filename of files included with \lstinputlisting; also try caption instead of title
	keywordstyle=\bfseries\color{green!40!black}, % keyword style
	commentstyle=\itshape\color{purple!40!black}, % comment style
	stringstyle=\color{mauve}, % string literal style
	escapeinside=\`\`, % if you want to add LaTeX within your code
	morekeywords={*,restrict,...}, % if you want to add more keywords to the set
	linewidth=0.99\textwidth,
	xleftmargin=0.5cm,
	%identifierstyle=\color{blue},
}
